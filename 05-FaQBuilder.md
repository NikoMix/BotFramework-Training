# Microsoft QnA Maker

In this section we will have some hands on experience with the QnA Maker. 

The documentation explains QnA Maker with these words: "Microsoft QnA Maker is a free, easy-to-use, REST API and web-based service that trains AI to respond to user's questions in a more natural, conversational way. Compatible across development platforms, hosting services, and channels, QnA Maker is the only question and answer service with a graphical user interface—meaning you don’t need to be a developer to train, manage, and use it for a wide range of solutions."

Please find the Documentation to QnA Maker in the link below;
https://qnamaker.ai/Documentation


## Create a new QnA Service

Please move on to the website below to start creating a QnA Service.

https://qnamaker.ai

From the main page click the "Sign In" button on the right top of the page. You can use your Avanade credentials to sign in to the QnA Maker. After you login please click **Create new service** from the tab on the top of the page. 

![Create a QnA Service](https://jrbrbq.by3302.livefilestore.com/y4mV_SBLAImv3w3E4iiW6b_Z6zhQnBr7JTHqgoqjPtcRDXUJKMG6-luQPL8pQJMmbn2c7RKXkO8mrHWuF49RUnVSvV1RYxFzcU4OdCO0o1DuaL1U3MTtulZzI6K8VY-spLMoMXj9zUApdRAl4-1QUISgeoqRKdhU9F-WdMgk--M-wLAVqCGbxP9wZaHqh9JtYdUVWpJRqZTaB0GnuFWdKgpNA?width=720&height=124&cropmode=none)

In the page that opens enter a **Service Name** for your QnA Service and then click the **Create** button.

![Tap Create Button](https://izveyg.by3302.livefilestore.com/y4mWxKN_wpI_BmmRa7FzREORE_VsQegSOXn17RmZU01tt1wZ2Vb6PilmcTUJ-hH8G9ksYJ7_SEaCOKjN6Z9CpopO06xvxpHVyYipSv-bCQpeXIKUnsqBbcAMpFopzurgJOTY1KhnWhmXtLvUIOojRrspKUIHA-3s81CT_jvz_Cdpj2B1r4Tus1FCszZyShLKPQWX_S3u17U-Dgmfd1O6b1--Q?width=920&height=276&cropmode=none)


## Improve the Knowledge Base of your QnA Service

After creating your new QnA Service you will be forwarded to the main page of your QnA Service. You should see a similar menu on the left of the screen as shown in the image below. You can also reach your QnA Service by clicking the **My Services** tab from the top of the screen and lastly by clicking the **Edit Button** next to your QnA Service Name.

![QnA Sevice Main Menu](https://8mycwa.by3302.livefilestore.com/y4mkKUpIQtiwgohxTtuyQqlzZ5MNHPLMZKc4HXPVi2AriI44B8czx-aXPE7A_eTBp8NSSIXfOQ0MXN6E12t2ZWquldMzplwt64zY638lJq2ugqF258KzdMEhQe-ljptxmXYmeUF2_ZAZl-TZT4FOoL7CWZX7EoVmeZtryFljalzTipuuWScjcZSCKpGy6hK9dzTDuokC8d7AOCk-Kyn_YoUig?width=304&height=316&cropmode=none)

Make sure that **Knowledge Base** is selected from the side menu as shown above. Now we will add a new question and answer to improve our Knowledge Base. We simply do this by clicking the **+ Add new QnA pair** button on the right top as shown in the image below. After clicking this button we will have a new empty line visible in our Knowledge Base. Enter your question under the **Question** header and enter your response under the **Answer** header. Once you are done with improving your QnA Service click the **Save and retrain** button on the top of the page which you can also find below.

![Add Question and Answer](https://yuagea.by3302.livefilestore.com/y4mmwHVrfYcGMpRCJQOHTU5QWF1a1drLTO_NZbeKMWoBBQFtDQBiRmhdoN3FvN2WSV_1FhfsAkxkcMOW5OknNvnv0MaMKwiDgtbLm_ASAv10HF1zlrAF5LY6ZJmlDTxhbnioBhHptas_zcVH-6NHfT0ta0rsshUJd02BKx1gnU87NknhYv3TYsk7RO9qqeLxSXC3NTrybJMJeOyGh28TEykRg?width=1232&height=398&cropmode=none)

If you made a mistake don't worry because you always have the chance to delete your Question and Answer. You can do this my clicking the **Delete QnA pair** button that opens a drop-down when you click the three dots on the corner of the Question or Answer box. Please check the image below to see the drop-down.

If you are satisfied with your answer and you want your client to reach this answer by asking anohter question, you might aswell use the **Add alternative phrasing** button which is visible in the drop-down that opens when you click the three dots on the corner of the Question box. This will create a new line with the same Answer box but an empty Question box. Please check the image below to see the drop-down.

Don't forget to save your work after you do the necessary changes to Knowledge Base. 

![Delete Question/Answer or add an Alternative](https://x2tf1q.by3302.livefilestore.com/y4mD3LEF94-f7x6P3qo94gOpNKvb9JlHUOGZcbyWKB9H0GryRPplqKOspSUzq-bOyIMmd4ySp7Sapkr4HwJjd1oKx1aoUwDgKgIXZNp9UPi-3DDjjhoxm-QwaGus6ucV8Ed_PNS5ywlJkr0Wz2wvOzE9-UTdkCxOVK6t_tAjQySPMroLFB0vTQ38UVWLUlq-vGOireE_60Dhy6YjhnhVSZanA?width=770&height=435&cropmode=none)


## Test your QnA Service

On the main screen of your QnA Service click the **Test** header on the right menu. From this screen you can test the questions and answers of your Knowledge Base. You can change the answer from the left side of the chat box. You can add an alternative question from the right side of the screen. Please find the this page in the image below.

Don't forget to save your work after you do the necessary changes to Knowledge Base. 

![Test your QnA Service](https://kyiqka.by3302.livefilestore.com/y4m0B3vPye_soAThT-yY82aQDPOpGmaEF6TfMXIjo3ESvgIjjccIdtcSyuKedHKR1xaj1p-VtaXhLzsTpo5IJImR9qx2Jq_43rxLCAlu_wsy-vzJmnkiXKqv-5CaEaVwlGylZw5GssUyBAL4gh9SuGZgAWPxaC_tK81IH5oMQHO2P4HcppGZDP9XacE-X7XlZA7okrmC2_G4CE3u7PqatjogQ?width=990&height=675&cropmode=none)

## Publish your QnA Service

Once your done with adding data to the Knowledge Base and the testing of your Knowledge Base this means that you are ready to Publish your QnA Service. We do this by clicking the **Publish** button on the right top of the page. 

![Publish button for the QnA Service](https://9g1p7q.by3302.livefilestore.com/y4mtH3K9eUG8FVvdNh5Ln6CfCXuPdONSRaZsHO7uzSiW3mVYqo1iUlW8Xr9JlYTe7ijjBffC7Znv3mUhcu15GCA0-NuTyRQmOuc3oUHpitKYcRqy6UmgyC1Mk8BYuf-99i0Eash26vjtY2kA24JubtZjAOMWSd-8gpVmq6-glAHsjGybaGOlpTRv3ADEZPB5liAWX9ot8OrM_Bk6nVEKJl6Rg?width=454&height=182&cropmode=none)

After clicking the **Publish** button from the main page you will be forwarded to the page with the **Review your changes** header. On this screen you are able to see the newly added, deleted and current number of QnA's. Please check the image below to see this page. Once you are sure with the changes you can click the **Publish** button.


![See changes before publishing the QnA Service](https://w5nbsg.by3302.livefilestore.com/y4mAnrcEtQlHJWDHcPG8OClV59zLXVN0MG7WytadKxV7zNfjFLkr6mMeowO4oD75VRvS9HGqz3ue2weOTLsGzPXh4-HWAieGoi1oEt99AQQwB0SDfs81LgAzFT6_JuzG1A_Din0BvCnLhNa-jUVNn-RXET_4FpjsCdBduPR8932JdY4kZr-5viu0pO18CPVn1LPBWWBEl6F1xxKsmuIc4pX9A?width=1068&height=300&cropmode=none)

Congratulations! If you see a similar screen to the image below this means that you have your QnA Service up and running. There two important keys we have to note down on this page which will help us communicate with our VS project. The first key is the string between **POST/knowledgebases/** and **/generateAnswer**. The second key is the **Ocp-Apim-Subscription-Key**

![QnA Service Keys](https://wcqaqa.by3302.livefilestore.com/y4mpeG2ffAcnuEaBGhFBjlh-2M7bjS_By_zWHvKbAvO6U3DOmHfsr1fP7BbLKgN2LREcQD8-dZhphmEjNsaFywy1cBzXjRnWDcADlkmfpmHHneo1oTE-IA6Olgf0olJ9lUOC1_uCJvMPjNxdtALLb4xquagf21tpPmqv9hwsVbV8R935pZkT5CD2SrVxhYN96yBrCzxwJnh64AllcRw2v90Kg?width=761&height=386&cropmode=none)

 ## Add Keys to Microsoft Azure Web App

Now it's time to add our keys to our Microsoft Azure Web App. We always have the chance to save the keys to VS but for security reasons its always better to save the keys to the Microsoft Azure Web App and then give a reference to the Microsoft Azure Web App from VS. 

You should have the two keys mentioned in the section above. The first key is the string between **POST/knowledgebases/** and **/generateAnswer**. The second key is the **Ocp-Apim-Subscription-Key**.

You should add these numbers to your Microsoft Azure Web App. Open the Microsoft Azure Web App you created in the previous steps. In the left menu bar find **Application Settings** under the **Settings** part. The left menu should be similar to the image below.

   ![Web App Application Settings](https://w5mqsg.by3302.livefilestore.com/y4m5NbT5UBfeDVbsJwQ6P5zwq6jGuBmZz2rDnKjgAyTmj0ZoxX045SKrPtwA1M9C_rZmjXf4fqILiWOJQvgj-3VZ96Fb1bLpcw6W0CANfOEPrsz8waeCQo6pQ5DH1A1dkunrpPCinQul9EEaVHToyUal-CtNOxroi2Uy230qO8oaeyRewqJbu2MziyKMdP2gUIj3nw5aRHz57j_mtv38BHZCQ?width=193&height=266&cropmode=none)

Now we will add the two keys to the **App settings** section. In the **App settings** section each line is formed of **Key** and **Value**. 

The **Key** is kind of like a mask to the string you will save. So you will use this **Key** in VS. By this way if someone gets their hands on your script they will not be able to reach your keys.

The **Value** is the real key value that you will be masking.

Please check the image below. You should add your keys to the **App settings** section.

Don't forget to click the **Save** button to save your changes.

  ![Add QnA Maker Keys to Application Settings](https://78yhwa.by3302.livefilestore.com/y4mybv48TGGm4acAfdekN7SON6ZNRgdcW_AqRQyFYhxr9KrjA0M6AwG6iJkywf-et5DxkcKtnjjMDyyJeJi6yKOvT92X-jpgjksZT1eVFhKAKMjWCsBfyJ7x-Xytj2ZqTUKMsn9Pwg5WcR5_E88MHwA4_AL0gMtfbTfyDsNry50KQ8anMggsUvT93bx5gdrojUiHsAKypYtAJv6tr1px3Rb5g?width=1016&height=213&cropmode=none)

Once you save the two keys to your Microsoft Azure Web App, its time to add the keys to your VS project. In VS make sure you are using the **Key** names in the image above. You should add your keys as shown in the image below.

 ![QnA Maker Key reference](https://ijvjyg.by3302.livefilestore.com/y4mF6d5M7nRjdg-u2togw5-140Xxj4nNGrGY85l5_3UQVfDa-dIiKE0wmEECcOUlL5WMR6Nr5vysDaiWqgtK6QHaNZ73WdvJ51k6O69NR_wutCuQMEF5LtUegfilms8ywhsMxhfnOpEM8LAs-ctuqvGlbaaq5AHWx01qUx0WqN2Q5Mi9GqM7WrczqQYVmDya4ALETq4dYBgFddX3HtlZOtdJA?width=354&height=80&cropmode=none)